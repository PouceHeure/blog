<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Hugo POUSSEUR</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css><link rel=stylesheet href=https://pouceheure.github.io/blog/css/style.css><link rel=stylesheet href=https://pouceheure.github.io/blog/css/color.css><link rel=stylesheet href=https://pouceheure.github.io/blog/css/markdown.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css><link rel=icon type=image/png sizes=32x32 href=https://pouceheure.github.io/blog/favicon//favicon-32.png><link rel=icon type=image/png sizes=16x16 href=https://pouceheure.github.io/blog/favicon//favicon-16.png><link rel=icon type=image/png sizes=64x64 href=https://pouceheure.github.io/blog/favicon//favicon-64.png><link rel=apple-touch-icon sizes=180x180 href=https://pouceheure.github.io/blog/favicon//apple-touch-icon.png><link rel="shortcut icon" href=https://pouceheure.github.io/blog/favicon//favicon.ico><style>@media(max-width:767.98px){main{margin-top:112px}}@media(min-width:768px){main{margin-top:56px}}</style></head><body class=bg-light><header><nav class="navbar navbar-expand-md navbar-dark navbar-custom fixed-top bg-primary text-white p-2"><div class="container-fluid px-4 d-flex align-items-center justify-content-between"><a class="navbar-brand fw-bold" href=https://pouceheure.github.io/blog/>Hugo POUSSEUR</a><div class="d-flex align-items-center social-icons ms-md-0 ms-auto"><a href=https://www.linkedin.com/in/hugo-pousseur/ target=_blank class="text-white me-2"><i class="bi bi-linkedin icon-size"></i>
</a><a href=https://github.com/pouceheure/ target=_blank class="text-white me-2"><i class="bi bi-github icon-size"></i>
</a><button type=button class="btn btn-link text-white me-2 p-0" data-bs-toggle=modal data-bs-target=#contactModal>
<i class="bi bi-chat-fill icon-size"></i>
</button>
<a href="https://www.youtube.com/playlist?list=PLGzYzDkg-SZrXPj-0gGwnueRWiMS9GiOM" target=_blank class=text-white><i class="bi bi-youtube icon-size-lg"></i></a></div><div class="collapse navbar-collapse justify-content-end d-none d-md-flex" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class="nav-link text-white fw-bold me-3" href=https://pouceheure.github.io/blog/>Home</a></li><li class=nav-item><a class="nav-link text-white fw-bold me-3" href=https://pouceheure.github.io/blog/projects/>Projects</a></li><li class=nav-item><a class="nav-link text-white fw-bold me-3" href=https://pouceheure.github.io/blog/articles/><span class="d-none d-lg-inline">Scientific </span>Articles</a></li><li class=nav-item><a class="nav-link text-white fw-bold me-3" href=https://pouceheure.github.io/blog/cv/>About</a></li></ul></div></div></nav><nav class="d-flex d-md-none bg-secondary p-2 navbar-dark navbar-custom fixed-top" style=top:56px;z-index:10><div class="container-fluid d-flex justify-content-around"><ul class="navbar-nav flex-row w-100 justify-content-around mb-0"><li class=nav-item><a class="nav-link text-white fw-bold" href=https://pouceheure.github.io/blog/>Home</a></li><li class=nav-item><a class="nav-link text-white fw-bold" href=https://pouceheure.github.io/blog/projects/>Projects</a></li><li class=nav-item><a class="nav-link text-white fw-bold" href=https://pouceheure.github.io/blog/articles/>Articles</a></li><li class=nav-item><a class="nav-link text-white fw-bold" href=https://pouceheure.github.io/blog/cv/>About</a></li></ul></div></nav></header><main class=container><meta name=description content="Lateral and longitudinal control applied to a real autonomous vehicle, integrated with a navigation layer."><meta name=keywords content="autonomous_vehicle,control_optimization,robotics_autonomy,ros2"><meta name=author content="Hugo POUSSEUR"><meta property="og:title" content="Autonomous Vehicle: Control"><meta property="og:description" content="Lateral and longitudinal control applied to a real autonomous vehicle, integrated with a navigation layer."><meta property="og:type" content="article"><meta property="og:url" content="https://pouceheure.github.io/blog/projects/project_autosys_control/"><meta property="og:image" content="https://pouceheure.github.io/blog/images/autosys-control/webcam_onboard.png"><link rel=stylesheet href=https://pouceheure.github.io/blog/css/toc.css><link rel=stylesheet href=https://pouceheure.github.io/blog/css/markdown-index.css><style>.markdown-content .content h2:first-of-type{margin-top:50px!important}.article-header{background:var(--bs-light);border-radius:8px;padding:1.5rem;margin-bottom:1.5rem}.article-body{background:var(--bs-white);border-radius:8px;padding:1.5rem}</style><div class="container d-flex flex-column flex-md-row align-items-start min-vh-100 gap-4"><aside class="toc d-none d-lg-block toc-sticky card-transparent" style=width:260px><div class="toc-container p-3 shadow rounded card d-flex flex-column h-100"><h5 class=toc-title><i class="bi bi-journal-richtext me-1"></i> Contents</h5><nav id=TableOfContents><ul><li><a href=#demonstration>Demonstration</a></li><li><a href=#overview>Overview</a></li><li><a href=#control-structure>Control Structure</a></li><li><a href=#longitudinal-control>Longitudinal Control</a></li><li><a href=#speed-profile-design>Speed Profile Design</a><ul><li><a href=#motivation>Motivation</a></li><li><a href=#linear-profile>Linear Profile</a></li><li><a href=#elliptical-profile>Elliptical Profile</a></li><li><a href=#profile-fusion>Profile Fusion</a><ul><li><a href=#curvature>Curvature</a></li><li><a href=#fusion>Fusion</a></li></ul></li></ul></li><li><a href=#lateral-control>Lateral Control</a><ul><li><a href=#controller-properties>Controller Properties</a></li></ul></li><li><a href=#real-vehicle-deployment>Real Vehicle Deployment</a><ul><li><a href=#tested-scenarios>Tested Scenarios:</a></li></ul></li></ul></nav></div></aside><article class="markdown-content flex-grow-1 w-100 w-md-75"><div class="article-header article-body"><h1 class="text-primary mb-4">Autonomous Vehicle: Control</h1><div class="d-flex flex-wrap gap-2 mb-3"><a href=https://pouceheure.github.io/blog/tags/autonomous_vehicle/ class="initial-a btn btn-sm btn-outline-secondary header-badge"><i class="bi bi-tag"></i>
<strong>Autonomous Vehicle</strong>
</a><a href=https://pouceheure.github.io/blog/tags/control_optimization/ class="initial-a btn btn-sm btn-outline-secondary header-badge"><i class="bi bi-tag"></i>
<strong>Control & Optimization</strong>
</a><a href=https://pouceheure.github.io/blog/tags/robotics_autonomy/ class="initial-a btn btn-sm btn-outline-secondary header-badge"><i class="bi bi-tag"></i>
<strong>Robotics & Autonomy</strong>
</a><a href=https://pouceheure.github.io/blog/tags/ros2/ class="initial-a btn btn-sm btn-outline-secondary header-badge"><i class="bi bi-tag"></i>
<strong>ROS2</strong></a></div><div class="gap-2 mb-3"><span class="btn btn-sm btn-info mt-2 header-badge" style=pointer-events:none><i class="bi bi-code-slash"></i>
<strong>cpp</strong></span></div></div><div class=article-body><div class=content><h2 id=demonstration>Demonstration</h2><figure><div class="ratio ratio-16x9" style=max-width:800px;margin:auto><iframe src=https://www.youtube.com/embed/nJx0B9U1x-g allowfullscreen></iframe></div><figcaption>Video 1 - Demo video: planning and control in action.</figcaption></figure><h2 id=overview>Overview</h2><p>As part of a collaborative autonomous driving project, I contributed to the <strong>low-level control</strong> system responsible for translating navigation commands into actuator signals (steering and torque).<br>This system is fully integrated into a ROS2-based autonomous stack and has been deployed and tested on a <strong>real electric vehicle with in-wheel motors</strong>.</p><figure id=fig-1><img src=https://pouceheure.github.io/blog/images/autosys-control/control_interfaces_inputs.png alt width=500><figcaption>Fig. 1 - Interfaces between planning and control modules.</figcaption></figure><h2 id=control-structure>Control Structure</h2><p>The controller is composed of two main components:</p><ul><li><strong>Lateral control</strong>: Aligns the vehicle to a reference trajectory via steering input.</li><li><strong>Longitudinal control</strong>: Tracks a target speed while respecting acceleration and deceleration constraints.</li></ul><p>Both control loops run at 100 Hz and are tuned for real-time performance on embedded systems.</p><figure id=fig-2><img src=https://pouceheure.github.io/blog/images/autosys-control/global_view.png alt width=800><figcaption>Fig. 2 - Block diagram of the full control pipeline.</figcaption></figure><h2 id=longitudinal-control>Longitudinal Control</h2><p>A classical <strong>PID controller</strong> is used to track the target velocity:</p><blockquote><div class=equation-scroll-wrapper><div class=equation-block>$$
u(t) = K_p \cdot e(t) + K_i \cdot \int_0^t e(\tau)\, d\tau + K_d \cdot \frac{de(t)}{dt}
\quad \text{Eq (1)} $$</div></div></blockquote><p>Where:</p><ul><li>$u(t)$: torque or throttle command</li><li>$e(t) = v_{\text{ref}}(t) - v(t)$: velocity error</li><li>$K_p$, $K_i$, $K_d$: proportional, integral, and derivative gains</li></ul><p>The controller is tuned for a smooth response and fast convergence, with clamping on acceleration/deceleration to ensure passenger comfort.</p><h2 id=speed-profile-design>Speed Profile Design</h2><h3 id=motivation>Motivation</h3><p>In scenarios such as stop lines or crossing zones, it is important to <strong>smoothly reduce velocity</strong>. Sharp deceleration causes discomfort and can lead to controller overshoot. Two types of speed profiles were evaluated.</p><h3 id=linear-profile>Linear Profile</h3><p>A simple constant deceleration model:</p><blockquote><div class=equation-scroll-wrapper><div class=equation-block>$$
v(d) = v_0 - \dot{v} \cdot d
\quad \text{Eq (2)} $$</div></div></blockquote><p>Where:</p><ul><li>$v(d)$: target speed at distance $d$</li><li>$v_0$: initial velocity</li><li>$\dot{v}$: constant deceleration</li></ul><h3 id=elliptical-profile>Elliptical Profile</h3><p>The elliptical profile models more natural, human-like deceleration behavior. It defines velocity as a function of distance to a stopping point:</p><blockquote><div class=equation-scroll-wrapper><div class=equation-block>$$
v(d) = v_{\text{max}} \cdot \sqrt{1 - \left( \frac{d}{d_{\text{stop}}} \right)^2}
\quad \text{Eq (3)} $$</div></div></blockquote><p>Where:</p><ul><li>$v(d)$: current velocity based on remaining distance $d$</li><li>$v_{\text{max}}$: maximum speed when far from the stop point</li><li>$d_{\text{stop}}$: total distance over which the vehicle stops</li></ul><p>With its derivative:</p><blockquote><div class=equation-scroll-wrapper><div class=equation-block>$$
\frac{\partial v}{\partial d} = -\frac{v_{\text{max}} \cdot d}{d_{\text{stop}}^2 \cdot \sqrt{1 - \left( \frac{d}{d_{\text{stop}}} \right)^2}}
\quad \text{Eq (4)} $$</div></div></blockquote><figure id=fig-3><img src=https://pouceheure.github.io/blog/images/autosys-control/plot_speed_profile.png alt width=700><figcaption>Fig. 3 - Comparison of linear and elliptical speed profiles.</figcaption></figure><p><strong>Benefits</strong>:</p><ul><li>Smooth, gradual deceleration at the beginning</li><li>Sharper slowdown near the end</li><li>More realistic than linear profiles</li></ul><h3 id=profile-fusion>Profile Fusion</h3><h4 id=curvature>Curvature</h4><p>Consider a planar curve $\gamma(d) = (x(d), y(d))$, parameterized by the <strong>curvilinear distance</strong> $d$.<br>The curve is interpolated using two independent cubic splines: one for $x(d)$ and one for $y(d)$.</p><p>The <strong>curvature</strong> $\kappa(d)$ is given by:</p><blockquote><div class=equation-scroll-wrapper><div class=equation-block>$$
\kappa(d) = \frac{x'(d)\, y''(d) - y'(d)\, x''(d)}{\left( x'(d)^2 + y'(d)^2 \right)^{3/2}}
\quad \text{Eq (5)} $$</div></div></blockquote><p>Where:</p><ul><li>$x&rsquo;(d)$: first derivative of $x$ with respect to $d$</li><li>$x&rsquo;&rsquo;(d)$: second derivative</li><li>similarly for $y(d)$</li></ul><p>Since $d$ is arc length, curvature is purely spatial and speed-invariant.</p><h4 id=fusion>Fusion</h4><p>The final velocity profile is computed by:</p><ol><li>Generating multiple profile candidates (e.g., obstacle, stop line, speed limit) and taking the minimal value at each point to combine them.<br><div class=refer-box><i class="bi bi-book"></i> For more details, refer to the <strong>Motion Profile Generation</strong> section of <a href=https://pouceheure.github.io/blog/projects/project_autosys_local-planning/#motion-profile-generation>Planning Project</a>.</div></li><li>Applying an elliptical profile for deceleration scenarios.</li><li>Taking the point-wise minimum across all profiles.</li></ol><figure id=fig-4><img src=https://pouceheure.github.io/blog/images/autosys-control/plot_minimum_speed.png alt width=500><figcaption>Fig. 4 - Final fused speed profile considering multiple constraints.</figcaption></figure><p>The final reference velocity includes curvature as:</p><blockquote><div class=equation-scroll-wrapper><div class=equation-block>$$
v_{\text{target}}(d) = \min \left( v_{\text{signal}}(d),\ v_{\text{curve}}(d),\ v_{\text{limit}} \right)
\quad \text{Eq (6)} $$</div></div></blockquote><h2 id=lateral-control>Lateral Control</h2><p>The lateral controller computes a <strong>steering angle</strong> to minimize both lateral offset and heading error with respect to the reference trajectory. The control law is a <strong>nonlinear feedback</strong> approach combining geometric and kinematic considerations:</p><blockquote><div class=equation-scroll-wrapper><div class=equation-block>$$
\theta_{\text{wheel}} = \alpha_1 \cdot \frac{L}{v^2 + D} \cdot (-e_{\text{lat}})
+ \alpha_2 \cdot \frac{L}{v + D} \cdot e_{\text{heading}}
+ \alpha_3 \cdot L \cdot \kappa
\quad \text{Eq (7)} $$</div></div></blockquote><p>Where:</p><ul><li>$e_{\text{lat}}$: lateral position error</li><li>$e_{\text{heading}}$: heading angle error</li><li>$L$: wheelbase</li><li>$v$: speed</li><li>$\kappa$: path curvature</li><li>$\alpha_1$, $\alpha_2$, $\alpha_3$: control gains</li><li>$D$: damping constant</li></ul><p>The steering command is then scaled:</p><blockquote><div class=equation-scroll-wrapper><div class=equation-block>$$
\theta_{\text{steering}} = K \cdot \theta_{\text{wheel}}
\quad \text{Eq (8)} $$</div></div></blockquote><h3 id=controller-properties>Controller Properties</h3><ul><li>Increased sensitivity to errors at low speed</li><li>Stability across different velocity ranges</li><li>Improved tracking in curves through curvature compensation</li></ul><p>This controller was tested on a real electric AV, showing consistent trajectory tracking in varied scenarios.</p><h2 id=real-vehicle-deployment>Real Vehicle Deployment</h2><p>Testing was carried out on a <strong>real electric vehicle</strong> equipped with:</p><ul><li>RTK-GPS and IMU for high-precision localization</li><li>A ROS2-based onboard PC running the full autonomy stack</li></ul><p>The control system directly commanded:</p><ul><li>Vehicle torque</li><li>Front steering actuator</li></ul><h3 id=tested-scenarios>Tested Scenarios:</h3><ul><li>Curved roads, roundabouts, sharp and soft turns</li><li>Straight segments with varying navigation constraints</li></ul></div></div></article></div><script src=https://pouceheure.github.io/blog/js/highlight-toc.js></script><script src=https://pouceheure.github.io/blog/js/counter-toc.js></script><script src=https://pouceheure.github.io/blog/js/select-toc-part.js></script><script src=https://pouceheure.github.io/blog/js/select-video.js></script></main><div class="modal fade" id=contactModal tabindex=-1 aria-labelledby=contactModalLabel aria-hidden=true><div class="modal-dialog modal-dialog-centered"><div class=modal-content><div class=modal-header><h5 class=modal-title id=contactModalLabel>Contact me</h5><button type=button class=btn-close data-bs-dismiss=modal aria-label=Close></button></div><div class=modal-body><p class=mb-2>Send me email with subject starting by [contact-web]. Email address: click on reveal (avoid bot scrapping).</p><code id=email data-noise=~ data-email="=02~bj5~Cbp~FWb~nBk~c1V~2cz~V3b~w5y~bnV~Ha">=02~bj5~Cbp~FWb~nBk~c1V~2cz~V3b~w5y~bnV~Ha</code><div class=visually-hidden aria-live=polite id=emailLive></div></div><div class=modal-footer><button id=revealEmailBtn class="btn btn-primary">
Reveal Email
</button>
<button type=button class="btn btn-secondary" data-bs-dismiss=modal>
Close</button></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script src=https://pouceheure.github.io/blog/js/setup-latex.js></script><script src=https://pouceheure.github.io/blog/js/highlight-navbar.js></script><script>highlightNavbar("https://pouceheure.github.io/blog/")</script><script src=https://pouceheure.github.io/blog/js/webmail-reveal.js></script></body></html>