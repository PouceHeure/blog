<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Hugo POUSSEUR</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css><link rel=stylesheet href=https://pouceheure.github.io/blog/css/style.css><link rel=stylesheet href=https://pouceheure.github.io/blog/css/color.css><link rel=stylesheet href=https://pouceheure.github.io/blog/css/markdown.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css><link rel=icon type=image/png sizes=32x32 href=https://pouceheure.github.io/blog/favicon//favicon-32.png><link rel=icon type=image/png sizes=16x16 href=https://pouceheure.github.io/blog/favicon//favicon-16.png><link rel=icon type=image/png sizes=64x64 href=https://pouceheure.github.io/blog/favicon//favicon-64.png><link rel=apple-touch-icon sizes=180x180 href=https://pouceheure.github.io/blog/favicon//apple-touch-icon.png><link rel="shortcut icon" href=https://pouceheure.github.io/blog/favicon//favicon.ico><style>@media(max-width:767.98px){main{margin-top:112px}}@media(min-width:768px){main{margin-top:56px}}</style></head><body class=bg-light><header><nav class="navbar navbar-expand-md navbar-dark navbar-custom fixed-top bg-primary text-white p-2"><div class="container-fluid px-4 d-flex align-items-center justify-content-between"><a class="navbar-brand fw-bold" href=https://pouceheure.github.io/blog/>Hugo POUSSEUR</a><div class="d-flex align-items-center social-icons ms-md-0 ms-auto"><a href=https://www.linkedin.com/in/hugo-pousseur/ target=_blank class="text-white me-2"><i class="bi bi-linkedin icon-size"></i>
</a><a href=https://github.com/pouceheure/ target=_blank class="text-white me-2"><i class="bi bi-github icon-size"></i>
</a><button type=button class="btn btn-link text-white me-2 p-0" data-bs-toggle=modal data-bs-target=#contactModal>
<i class="bi bi-chat-fill icon-size"></i>
</button>
<a href="https://www.youtube.com/playlist?list=PLGzYzDkg-SZrXPj-0gGwnueRWiMS9GiOM" target=_blank class=text-white><i class="bi bi-youtube icon-size-lg"></i></a></div><div class="collapse navbar-collapse justify-content-end d-none d-md-flex" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class="nav-link text-white fw-bold me-3" href=https://pouceheure.github.io/blog/>Home</a></li><li class=nav-item><a class="nav-link text-white fw-bold me-3" href=https://pouceheure.github.io/blog/projects/>Projects</a></li><li class=nav-item><a class="nav-link text-white fw-bold me-3" href=https://pouceheure.github.io/blog/articles/><span class="d-none d-lg-inline">Scientific </span>Articles</a></li><li class=nav-item><a class="nav-link text-white fw-bold me-3" href=https://pouceheure.github.io/blog/cv/>About</a></li></ul></div></div></nav><nav class="d-flex d-md-none bg-secondary p-2 navbar-dark navbar-custom fixed-top" style=top:56px;z-index:10><div class="container-fluid d-flex justify-content-around"><ul class="navbar-nav flex-row w-100 justify-content-around mb-0"><li class=nav-item><a class="nav-link text-white fw-bold" href=https://pouceheure.github.io/blog/>Home</a></li><li class=nav-item><a class="nav-link text-white fw-bold" href=https://pouceheure.github.io/blog/projects/>Projects</a></li><li class=nav-item><a class="nav-link text-white fw-bold" href=https://pouceheure.github.io/blog/articles/>Articles</a></li><li class=nav-item><a class="nav-link text-white fw-bold" href=https://pouceheure.github.io/blog/cv/>About</a></li></ul></div></nav></header><main class=container><meta name=description content="Longitudinal control by teleop."><meta name=keywords content="autonomous_vehicle,control_optimization,robotics_autonomy,ros2"><meta name=author content="Hugo POUSSEUR"><meta property="og:title" content="Autonomous Vehicle: Teleop"><meta property="og:description" content="Longitudinal control by teleop."><meta property="og:type" content="article"><meta property="og:url" content="https://pouceheure.github.io/blog/projects/project_autosys_teleop/"><meta property="og:image" content="https://pouceheure.github.io/blog/images/teleop/thumbnail.png"><link rel=stylesheet href=https://pouceheure.github.io/blog/css/toc.css><link rel=stylesheet href=https://pouceheure.github.io/blog/css/markdown-index.css><div class="container d-flex flex-column flex-md-row align-items-start min-vh-100 gap-4"><aside class="toc w-30 d-none d-lg-block toc-sticky"><div class="toc-container p-3 shadow rounded card d-flex flex-column h-100 card-transparent"><h5 class=toc-title><i class="bi bi-journal-richtext me-1"></i> Contents</h5><nav id=TableOfContents><ul><li><a href=#demonstration>Demonstration</a></li><li><a href=#overview>Overview</a></li><li><a href=#joystick-input-to-signal>Joystick Input To Signal</a></li><li><a href=#speed-limitation-control>Speed Limitation Control</a></li><li><a href=#others-features>Others Features</a></li></ul></nav></div></aside><article class="markdown-content flex-grow-1 w-100 w-md-75 card-transparent p-0 p-md-3"><h1 class=text-primary>Autonomous Vehicle: Teleop</h1><div class="d-flex flex-wrap gap-2"><a href=https://pouceheure.github.io/blog/tags/autonomous_vehicle/ class="btn btn-sm btn-secondary"><i class="bi bi-tag"></i>
<strong style=font-size:1em>Autonomous Vehicle</strong>
</a><a href=https://pouceheure.github.io/blog/tags/control_optimization/ class="btn btn-sm btn-secondary"><i class="bi bi-tag"></i>
<strong style=font-size:1em>Control & Optimization</strong>
</a><a href=https://pouceheure.github.io/blog/tags/robotics_autonomy/ class="btn btn-sm btn-secondary"><i class="bi bi-tag"></i>
<strong style=font-size:1em>Robotics & Autonomy</strong>
</a><a href=https://pouceheure.github.io/blog/tags/ros2/ class="btn btn-sm btn-secondary"><i class="bi bi-tag"></i>
<strong style=font-size:1em>ROS2</strong></a></div><div class=content><h2 id=demonstration>Demonstration</h2><p><figure id=video-demo-teleop><div class="ratio ratio-16x9" style=max-width:800px;margin:auto><iframe src=https://www.youtube.com/embed/wK4yOg2SyBs allowfullscreen></iframe></div><figcaption>Video 1 - Teleoperation Demo. (Train Demo)</figcaption></figure>This
<a href=#video-demo-teleop>Video 1: Teleoperation Demo. (Train Demo)</a>
illustrates the longitudinal control of the car via teleoperation.</p><ul><li>Example of speed saturation: 0:07 - 0:16 (limited by lateral acceleration)</li><li>Example of braking: 1:20 (vehicle is stopped by teleop command)</li></ul><h2 id=overview>Overview</h2><p>The vehicle autonomously plans a path and follows it.<br>A teleoperator controls only the longitudinal speed using a joystick, similar to driving a train. The operator specifies the desired speed <em>along the pre-defined path</em>, but does not steer.</p><p>The system must integrate the teleoperator’s desired speed while ensuring safety at all times.<br>To achieve this, the vehicle continuously computes the maximum safe speed, taking into account:</p><ul><li>path curvature (default)</li><li>road rules (optional)</li><li>detected obstacles (optional)</li></ul><p>The executed speed is determined as:</p><blockquote><div class=equation-scroll-wrapper><div class=equation-block>$$
\text{speed_target} = min(\text{speed_joy}, \text{speed_safe})
\quad \text{Eq (1)} $$</div></div></blockquote><p>This ensures the vehicle respects the operator&rsquo;s intent while never exceeding safe operating limits.</p><p>The
<a href=#video-demo-teleop>Video 1: Teleoperation Demo. (Train Demo)</a>
shows these different values of speed, from the left to right:</p><ul><li><code>speed_joy</code>: speed from the controller;</li><li><code>speed_target</code>: speed joy including safety saturation;</li><li><code>speed_vehicle</code>: speed of the vehicle;</li></ul><h2 id=joystick-input-to-signal>Joystick Input To Signal</h2><p>The joystick provides an input value between –1 and +1. The idea is to remap this value to a range between 0 and the maximum speed (a parameter), and then generate a square-wave signal.<br>This square signal is then used by the Motion Manager as one of its input signals.</p><div class=refer-box><i class="bi bi-book"></i> For more details, refer to the <strong>Motion Profile Generation</strong> section of <a href=https://pouceheure.github.io/blog/projects/project_autosys_local-planning/#motion-profile-generation>Navigation Project</a>.</div><div class=refer-box><i class="bi bi-book"></i> For more details, refer to the <strong>Profile Fusion</strong> section of <a href=https://pouceheure.github.io/blog/projects/project_autosys_control/#profile-fusion>Control Project</a>.</div><p>The joystick can be read directly by the <code>joy</code> node from the <em>joy</em> package, which publishes the state of the joystick over a topic. A converter node transforms this state into a velocity signal, which is then exploited by the Motion Manager.</p><p><code>Joy Node -topic-> Converter To Signal -topic-> Motion Manager</code></p><p>(in parallel) <code>Stack Nav -topic-> Motion Manager</code></p><figure id=video-teleop-to-signal><div class="ratio ratio-16x9" style=max-width:800px;margin:auto><iframe src=https://www.youtube.com/embed/eF1Tazql7R8 allowfullscreen></iframe></div><figcaption>Video 2 - Teleop to signal variation.</figcaption></figure><p>The
<a href=#video-teleop-to-signal>Video 2: Teleop to signal variation.</a>
represents the signal variation sent to the motion behavior.
The signal is visible on the screen, drawn in red. The height of the signal is variating depending of the teleop position.</p><h2 id=speed-limitation-control>Speed Limitation Control</h2><p>Thus, the joystick controls the vehicle by limiting the maximum speed rather than commanding acceleration directly. This makes it possible to fuse the human operator’s intention with the vehicle’s acceptable (safe) motion constraints (obstacle, road rules & lateral accelaration maximal).</p><figure id=fig-1><img src=https://pouceheure.github.io/blog/images/teleop/signal-sat.png alt width=800><figcaption>Fig. 1 - Example Signal Saturation</figcaption></figure><blockquote><p>The
<a href=#fig-1>Fig. 1</a>
illustrates how the signal becomes saturated.</p><ul><li><strong>Top graph, Joy Signal:</strong> the signal defined from the joystick control state.</li><li><strong>Middle graph, Bumper Signal:</strong> the signal computed by the system to limit the vehicle’s speed when crossing a bumper (safety condition).</li><li><strong>Bottom graph, Target Signal:</strong> the final signal resulting from combining the Joy Signal and the Bumper Signal.</li></ul></blockquote><p>Thus, the results can be interpreted as follows: before and after the bumper, the system uses the teleoperation speed; when passing over the bumper, the system saturates the speed according to the bumper-imposed limitation.</p><blockquote><p><strong>Note 1:</strong> This is the maximum speed authorized by the system, not the speed directly sent to the controller.</p></blockquote><h2 id=others-features>Others Features</h2><p>The joystick can also control the turn signals and the horn of the vehicle.</p></div></article></div><script src=https://pouceheure.github.io/blog/js/highlight-toc.js></script><script src=https://pouceheure.github.io/blog/js/select-toc-part.js></script><script src=https://pouceheure.github.io/blog/js/select-video.js></script></main><div class="modal fade" id=contactModal tabindex=-1 aria-labelledby=contactModalLabel aria-hidden=true><div class="modal-dialog modal-dialog-centered"><div class=modal-content><div class=modal-header><h5 class=modal-title id=contactModalLabel>Contact me</h5><button type=button class=btn-close data-bs-dismiss=modal aria-label=Close></button></div><div class=modal-body><p class=mb-2>Send me email with subject starting by [contact-web]. Email address: click on reveal (avoid bot scrapping).</p><code id=email data-noise=~ data-email="=02~bj5~Cbp~FWb~nBk~c1V~2cz~V3b~w5y~bnV~Ha">=02~bj5~Cbp~FWb~nBk~c1V~2cz~V3b~w5y~bnV~Ha</code><div class=visually-hidden aria-live=polite id=emailLive></div></div><div class=modal-footer><button id=revealEmailBtn class="btn btn-primary">
Reveal Email
</button>
<button type=button class="btn btn-secondary" data-bs-dismiss=modal>
Close</button></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script src=https://pouceheure.github.io/blog/js/setup-latex.js></script><script src=https://pouceheure.github.io/blog/js/highlight-navbar.js></script><script>highlightNavbar("https://pouceheure.github.io/blog/")</script><script src=https://pouceheure.github.io/blog/js/webmail-reveal.js></script></body></html>